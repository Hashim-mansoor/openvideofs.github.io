(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{243:function(e,t,r){var content=r(271);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("4c00651c",content,!0,{sourceMap:!1})},244:function(e,t,r){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},245:function(e,t,r){var content=r(275);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("acdaa55a",content,!0,{sourceMap:!1})},270:function(e,t,r){"use strict";var c=r(243);r.n(c).a},271:function(e,t,r){var c=r(58),n=r(244),o=r(272),l=r(273);t=c(!1);var d=n(o),v=n(l);t.push([e.i,".navbar-dark[data-v-53596fda]{border-bottom:1px solid #000;padding:.5rem}.btn-outline-primary[data-v-53596fda]:hover,.btn-primary[data-v-53596fda]{color:#fff!important}.modal-body[data-v-53596fda]{background:#343a40!important}.modal-body form[data-v-53596fda]{background:#495057;padding:1rem;border:1px solid #000}.ov-search-box[data-v-53596fda]{margin-top:10rem;border:1px solid #000}.has-results[data-v-53596fda]{margin-top:5rem!important}.ov-search-page[data-v-53596fda]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.ov-search-page .ov-circle[data-v-53596fda]{border-radius:50%;margin:0 auto;padding:1.5rem;position:relative}.ov-search-page .ov-circle .close[data-v-53596fda]{display:none;position:absolute;right:-5px;top:-10px}.ov-search-page .ov-circle:hover .close[data-v-53596fda]{display:block}.ov-search-page .ov-circle .ov-add-page[data-v-53596fda],.ov-search-page .ov-circle .ov-all-pages[data-v-53596fda],.ov-search-page .ov-circle img[data-v-53596fda]{width:2rem;height:2rem;display:block}.ov-search-page .ov-circle .ov-all-pages[data-v-53596fda]{-webkit-mask:url("+d+") no-repeat center/2rem;mask:url("+d+") no-repeat center/2rem;background-color:#8dc73f}.ov-search-page .ov-circle .ov-add-page[data-v-53596fda]{-webkit-mask:url("+v+") no-repeat center/2rem;mask:url("+v+") no-repeat center/2rem;background-color:#8dc73f}.ov-search-page .ov-search-page-text[data-v-53596fda]{margin:0 auto}.ov-result-card .ov-result-title[data-v-53596fda]{display:-webkit-box;display:flex}.ov-result-card .ov-result-title img[data-v-53596fda]{min-width:1.5rem;max-width:1.5rem;height:1.5rem;margin:auto 0}.ov-result-card .ov-result-title .ov-result-text[data-v-53596fda]{margin:auto 0 auto .5rem}",""]),e.exports=t},272:function(e,t,r){e.exports=r.p+"img/978b3a4.svg"},273:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB3aWR0aD0iNTEwcHgiIGhlaWdodD0iNTEwcHgiIHZpZXdCb3g9IjAgMCA1MTAgNTEwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTAgNTEwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPGcgaWQ9ImFkZC1jaXJjbGUtb3V0bGluZSI+CgkJPHBhdGggZD0iTTI4MC41LDEyNy41aC01MXYxMDJoLTEwMnY1MWgxMDJ2MTAyaDUxdi0xMDJoMTAydi01MWgtMTAyVjEyNy41eiBNMjU1LDBDMTE0Ljc1LDAsMCwxMTQuNzUsMCwyNTVzMTE0Ljc1LDI1NSwyNTUsMjU1CgkJCXMyNTUtMTE0Ljc1LDI1NS0yNTVTMzk1LjI1LDAsMjU1LDB6IE0yNTUsNDU5Yy0xMTIuMiwwLTIwNC05MS44LTIwNC0yMDRTMTQyLjgsNTEsMjU1LDUxczIwNCw5MS44LDIwNCwyMDRTMzY3LjIsNDU5LDI1NSw0NTl6Ii8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=="},274:function(e,t,r){"use strict";var c=r(245);r.n(c).a},275:function(e,t,r){(t=r(58)(!1)).push([e.i,".navbar-dark{border-bottom:1px solid #000;padding:.5rem}.btn-outline-primary:hover,.btn-primary{color:#fff!important}.modal-body{background:#343a40!important}.modal-body form{background:#495057;padding:1rem;border:1px solid #000}.ov-result-card{border:1px solid #000;cursor:pointer}.ov-result-card .ov-result-content em{font-weight:700;font-style:normal;color:#8dc73f}",""]),e.exports=t},317:function(e,t,r){"use strict";r.r(t);r(31),r(52),r(60),r(53),r(54),r(165),r(35);var c=r(12),n=(r(23),r(10)),o=r(11),l=r(19),d=r(14),v=r(20),h=r(15),f=r(234),m=r(72),y=r.n(m),w=r(252),C=(r(75),function(e,t,r,desc){var c,n=arguments.length,o=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(o=(n<3?c(o):n>3?c(t,r,o):c(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}),k=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).apply(this,arguments))).name="",e.url="",e.nameState=null,e.visible=!1,e}return Object(v.a)(t,e),Object(o.a)(t,[{key:"visibilityChanged",value:function(){return this.visible}},{key:"checkFormValidity",value:function(){var e=this.form.checkValidity();return this.nameState=e?"valid":"invalid",e}},{key:"resetModal",value:function(){this.name="",this.url="",this.nameState=null}},{key:"handleOk",value:function(e){e.preventDefault(),this.handleSubmit()}},{key:"handleSubmit",value:function(){var e=this;if(this.checkFormValidity()){var t=this.url.match(/(https?:\/\/)?(www.)?([^/]*)(\/.*)?/);t?(this.$nextTick((function(){e.visible=!1})),this.submit({name:this.name,url:t[3]})):this.nameState="invalid"}}},{key:"submit",value:function(data){return data}}]),t}(f.f);C([Object(f.c)("change")],k.prototype,"visible",void 0),C([Object(f.g)("visible"),Object(f.b)("change")],k.prototype,"visibilityChanged",null),C([Object(f.e)("form")],k.prototype,"form",void 0),C([Object(f.b)("submit")],k.prototype,"submit",null);var j,x=k=C([Object(f.a)({})],k),M=r(51),S=Object(M.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{attrs:{id:"modal-prevent-closing",title:"Add page to search"},on:{show:e.resetModal,hidden:e.resetModal,ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-group",{attrs:{state:e.nameState,label:"Page name","label-for":"page-name-input","invalid-feedback":"Name is required"}},[r("b-form-input",{attrs:{id:"page-name-input",state:e.nameState,placeholder:"eg. YouTube",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("b-form-group",{attrs:{state:e.nameState,label:"Page url","label-for":"page-url-input","invalid-feedback":"Url is required"}},[r("b-form-input",{attrs:{id:"page-url-input",state:e.nameState,placeholder:"eg. youtube.com",required:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)],1)])}),[],!1,null,null,null).exports,P=r(237),I=r(164),R=function(e,t,r,desc){var c,n=arguments.length,o=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(o=(n<3?c(o):n>3?c(t,r,o):c(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},T=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).apply(this,arguments))).showAddSearchModal=!1,e.query="",e.searchResults=null,e.selectedPages=[],e}var r;return Object(v.a)(t,e),Object(o.a)(t,[{key:"mounted",value:function(){this.queryData?(this.query=this.queryData.query,this.selectedPages=this.queryData.selectedPages,this.fetchResults(),P.a.trackSearchResultsView(this.selectedPages)):(this.toggleAll(),P.a.trackPageView("search"))}},{key:"handleSubmit",value:function(e){var t=e.url,r=e.name;this.library.addSearchPage({name:r,title:r,url:t,icon:"https://s2.googleusercontent.com/s2/favicons?domain_url=".concat(t)})}},{key:"toggleButton",value:function(e){this.areAllSelected&&(this.selectedPages=[]);var t=this.selectedPages.indexOf(e);-1===t?this.selectedPages.push(e):this.selectedPages.splice(t,1)}},{key:"toggleAll",value:function(){this.areAllSelected?this.selectedPages=[]:this.selectedPages=this.library.searchPages.map((function(e){return e.url}))}},{key:"handleCloseClicked",value:function(e){this.library.removeSearchPage(e)}},{key:"search",value:function(){var data={query:this.query,selectedPages:this.selectedPages};this.$router.push("/search/?data=".concat(encodeURIComponent(btoa(JSON.stringify(data))))),this.fetchResults(),P.a.trackSearchResultsView(this.selectedPages)}},{key:"fetchResults",value:(r=Object(c.a)(regeneratorRuntime.mark((function e(){var t,r,c,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://www.google.com/search?q=".concat(this.fullQuery,"&ovhideref=true"),e.next=3,y.a.get(t);case 3:r=e.sent.data,c=function(e){var html=(new DOMParser).parseFromString(e,"text/html");return Array.from(html.querySelectorAll(".g")).map((function(e){var title=e.querySelector("h3"),t=e.querySelector("span.st"),r=e.querySelector("a");if(title&&t&&r){var c=n.library.searchPages.find((function(e){return r.href.includes(e.url)}));return{title:title.textContent,url:r.href,description:t.innerHTML,icon:c?c.icon:""}}return null})).filter((function(e){return!!e}))},this.searchResults=c(r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"handleResultClicked",value:function(e){location.href=e}},{key:"library",get:function(){return I.Store.library}},{key:"areAllSelected",get:function(){return this.library.searchPages.length===this.selectedPages.length&&0!==this.library.searchPages.length}},{key:"fullQuery",get:function(){return"".concat(this.query," ").concat(this.selectedPages.map((function(e){return"site:".concat(e)})).join(" OR ")).split(" ").filter((function(e){return""!==e})).map((function(e){return encodeURIComponent(e)})).join("+")}},{key:"queryData",get:function(){if(this.$route.query.data)return JSON.parse(atob(decodeURIComponent(this.$route.query.data)))}}]),t}(f.f),O=T=R([Object(f.a)({components:{Navigation:w.a,AddSearchModal:S},fetch:(j=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.Store.library;case 2:case"end":return e.stop()}}),e)}))),function(){return j.apply(this,arguments)}),head:function(){return{title:"Search Videos - OpenVideo"}}})],T),L=(r(270),r(274),Object(M.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Navigation"),e._v(" "),r("AddSearchModal",{on:{submit:e.handleSubmit},model:{value:e.showAddSearchModal,callback:function(t){e.showAddSearchModal=t},expression:"showAddSearchModal"}}),e._v(" "),r("div",{staticClass:"container p-5 bg-dark ov-search-box",class:{"has-results":!!e.searchResults}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Series / Movie title"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),r("b-input-group-append",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){return e.search()}}},[e._v("Search")])],1)],1),e._v(" "),r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-auto p-3"},[r("div",{staticClass:"ov-search-page"},[r("div",{staticClass:"ov-circle btn btn-secondary",class:{active:e.areAllSelected},on:{click:function(t){return e.toggleAll()}}},[r("div",{staticClass:"ov-all-pages"})]),e._v(" "),r("div",{staticClass:"ov-search-page-text"},[e._v("All Pages")])])]),e._v(" "),e._l(e.library.searchPages,(function(t){return r("div",{key:t.url,staticClass:"col-auto p-3"},[r("div",{staticClass:"ov-search-page"},[r("div",{staticClass:"ov-circle btn btn-secondary",class:{active:e.selectedPages.includes(t.url)&&!e.areAllSelected},on:{click:function(r){return e.toggleButton(t.url)}}},[r("div",{staticClass:"close",on:{click:function(r){return e.handleCloseClicked(t.url)}}},[e._v("\n              ×\n            ")]),e._v(" "),r("img",{attrs:{src:t.icon}})]),e._v(" "),r("div",{staticClass:"ov-search-page-text"},[e._v(e._s(t.name))])])])})),e._v(" "),r("div",{staticClass:"col-auto p-3"},[r("div",{staticClass:"ov-search-page"},[r("div",{staticClass:"ov-circle btn btn-secondary",on:{click:function(t){e.showAddSearchModal=!0}}},[r("div",{staticClass:"ov-add-page"})]),e._v(" "),r("div",{staticClass:"ov-search-page-text"},[e._v("Add Page")])])])],2)],1),e._v(" "),e.searchResults?r("div",{staticClass:"container ov-search-results"},[r("div",{staticClass:"row"},e._l(e.searchResults,(function(t){return r("div",{key:t.url,staticClass:"col-6 p-3"},[r("b-card",{staticClass:"ov-result-card bg-dark",on:{click:function(r){return e.handleResultClicked(t.url)}}},[r("b-card-title",{staticClass:"h5 text-trunc-2-lines text-white"},[r("div",{staticClass:"ov-result-title"},[r("img",{attrs:{src:t.icon}}),e._v(" "),r("div",{staticClass:"ov-result-text"},[e._v(e._s(t.title))])])]),e._v(" "),r("div",{staticClass:"ov-result-content",domProps:{innerHTML:e._s(t.description)}})],1)],1)})),0)]):e._e()],1)}),[],!1,null,"53596fda",null));t.default=L.exports}}]);